<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.itwillbs.project_movie.mapper.CustomerServiceMapper">
<!--  공지사항  -->
 	<select id="selectNoticeListCount" resultType="int">
 		SELECT COUNT(*)
 		FROM notice_board
 			<if test="!searchKeyword.equals('')">
 				WHERE 
 				<choose>
 					<when test="searchType.equals('subject')">
 						notice_subject LIKE CONCAT('%','{#searchKeyword}','%')
 					</when>
 					<when test="searchType.equals('content')">
 						notice_content LIKE CONCAT('%','{#searchKeyword}','%')
 					</when>
 				</choose>
 			</if>
 	</select>
 	<select id="selectNoticeList" resultType="notice_board">
 		SELECT *
 		FROM notice_board
 		<if test="!searchKeyword.equals('')">
 				WHERE 
 				<choose>
 					<when test="searchType.equals('subject')">
 						notice_subject LIKE CONCAT('%','{#searchKeyword}','%')
 					</when>
 					<when test="searchType.equals('content')">
 						notice_content LIKE CONCAT('%','{#searchKeyword}','%')
 					</when>
 				</choose>
 			</if>
		LIMIT 
			#{startRow}
			, #{listLimit}
 	</select>
<!--  공지사항 게시물 눌렸을때 해당 게시글 뜨도록  -->
 	<select id="selectNotice" resultType="notice_board">
 		SELECT *
 		FROM notice_board
 		WHERE notice_code = #{notice_code}
 	</select>
<!--  공지사항 게시물 눌렸을때 조회수 증가  -->
 	<update id="updateNoticeReadCount">
 		<selectKey keyProperty = "view_count" resultType="int" order="AFTER">
 			SELECT view_count
 			FROM notice_board
 			WHERE notice_code = #{notice_code}
 		</selectKey>
 		UPDATE notice_board
 		SET view_count = view_count + 1
 		WHERE notice_code = #{notice_code}
 	</update>
 	<delete id="deleteNotice">
 		DELETE 
 		FROM notice_board
 		WHERE notice_code = #{notice_code}
 	</delete>
<!--  	faq xml -->
 	<select id="selectFaqListCount" resultType="int">
 		SELECT COUNT(*)
 		FROM faq_board
 	</select>
 	<select id="selectFaqList" resultType="faq_board">
 		SELECT *
 		FROM faq_board
		LIMIT 
			#{startRow}
			, #{listLimit}
 	</select>
 	<select id="selectFaq" resultType="faq_board">
 		SELECT *
 		FROM faq_board
 		WHERE faq_code = #{faq_code}
 	</select>
 	<update id="updateFaqReadCount">
<!--  		<selectKey keyProperty ="view_count" resultType="int" order="AFTER"> -->
<!--  			SELECT view_count -->
<!--  			FROM faq_board -->
<!--  			WHERE faq_code = #{faq_code} -->
<!--  		</selectKey> -->
 		UPDATE faq_board 
 		SET view_count = view_count + 1
 		WHERE faq_code = #{faq_code}
	</update>
 
 
 
 
 
 </mapper>