<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.itwillbs.project_movie.mapper.MyPageMapper">
<!-- 예매내역 글 전체 가져오기 -->
 	<select id="selectReservationDetailCount" resultType="int">
 		SELECT COUNT(*)
 		FROM reservation_detail
	</select>
	<select id="selectReservationDetail" resultType="reservationDetail">
		SELECT *
 		FROM reservation_detail
 		LIMIT 
 			#{startRow}
 			,#{listLimit}
	</select>
	<select id="selectReservationInfo" resultType="reservationDetail">
		SELECT *
 		FROM reservation_detail
 		WHERE r_code = #{r_code}
	</select>
	<select id="selectReservationCancelCount" resultType="int">
		SELECT COUNT(*)
		FROM reservation_cancel
	</select>
	<select id="selectReservationCancel" resultType="reservationCancel">
		SELECT *
		FROM reservation_cancel
		LIMIT 
			#{startRow}
			, #{listLimit}
	</select>
	
<!-- 	내가 본 영화 글 전체 가져오기 -->
	<select id="selectWathedMovieCount" resultType="int">
		SELECT COUNT(*)	
		FROM watched_movie
	</select>
<!-- 	내가 본 영화 시작번호 끝번호 -->
	<select id="selectWatchedMovie" resultType="watchedMovie">
		SELECT *
		FROM watched_movie
		LIMIT 
			#{startRow}
			, #{listLimit}
	</select>
	<select id="selectWatchedmovieReview" resultType="watchedMovie">
		SELECT *
		FROM watched_movie
		WHERE r_code = #{r_code}
	</select>
<!-- 1:1문의 글 전체 가져오기 -->
 	<select id="selectInquiryListCount" resultType="int">
 		SELECT COUNT(*)
 		FROM Inquiry
	</select>
<!-- 	1:1문의 글 시작번호,끝번호 -->
 	<select id="selectInquiryList" resultType="inquiry">
 		SELECT *
 		FROM Inquiry
 		LIMIT 
 			#{startRow}
 			,#{listLimit}
 	</select>
<!-- 	1:1문의 글 선택 -->
 	<select id="selectInquiry" resultType="inquiry">
 		SELECT *
 		FROM Inquiry
 		WHERE inquiry_code = #{inquiry_code}
 	</select>
<!-- 	1:1문의 글 작성-->
 	<insert id="insertInquiry">
 		INSERT INTO Inquiry
 		VALUES(
 			#{inquiry_code} + 1
 			, #{inquiry_subject}
 			, #{inquiry_writer}
 			, #{inquiry_content}
 			, #{inquiry_response}
 			, #{response_status}
 			, NOW()
 			, #{inquiry_writer_ip}
 		)
 	</insert>
<!--  	1:1문의 글 수정  -->
 	<update id="updateInquiry">
 		UPDATE Inquiry
 		SET inquiry_subject = #{inquiry_subject}
 		, inquiry_content = #{inquiry_content}
		, inquiry_date = #{inquiry_date}
		WHERE inquiry_code = #{inquiry_code}
 	</update>
<!--  	1:1문의 글 삭제 -->
	<delete id="deleteInquiry">
		DELETE 
		FROM Inquiry
		WHERE inquiry_code = #{inquiry_code}
	</delete>
 </mapper>